(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Mediabox=e():t.Mediabox=e()})(this,function(){return function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=5)}([function(t,e,i){i(2);var o=i(3)(i(1),i(4),null,null);t.exports=o.exports},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Mediabox",model:{prop:"selected"},data:function(){return{dialog:{model:!1},loading:{model:!0},dataset:{items:[]},toolbar:{selected:{title:"All",icon:"perm_media"},items:[],buttons:{gridlist:{model:!0}}},dataSelected:[]}},props:{selected:null,toolbarItems:{type:Array,default:function(){return[{count:"",title:"All",code:"all",icon:"perm_media",url:""}]}},items:{type:Array,default:function(){return[]}},url:{type:String,default:"/"},multiple:{type:Boolean,default:!1},timeout:{type:Number,default:200},open:{type:Boolean,default:!1}},computed:{computedToolbarItems:function(){return this.toolbarItems},computedDataset:function(){var t=this,e=this.dataset;return e.select=function(e,i){t.mediabox().select(e,i)},e}},methods:{init:function(){this.$emit("initialize"),this.dialog.model=this.open,this.initToolbarItems()},initToolbarItems:function(){this.toolbar.items=this.computedToolbarItems},setLoading:function(t){var e=this;setTimeout(function(){e.loading.model=t},1e3)},getDataset:function(t){var e=this;return new Promise(function(i,o){e.$http.get(t).then(function(t){var e=t.body;i({items:e})})})},mediabox:function(){var t=this;return{select:function(e,i){if(t.multiple){if(i.active)return i.active=!1,t.dataSelected.splice(i,1),t.$emit("input",t.dataSelected),void t.$emit("mediabox-selected",t.dataSelected);i.active=!0,t.dataSelected.push(i)}else i.active?(i.active=!1,t.dataSelected=null):(t.dataset.items.map(function(t){t.active=!1}),i.active=!0,t.dataSelected=i);t.$emit("input",t.dataSelected),t.$emit("mediabox-selected",t.dataSelected),t.dialogbox().toggle()}}},dialogbox:function(){var t=this;return{toggle:function(){setTimeout(function(){t.dialog.model=!t.dialog.model},t.timeout)},close:function(){t.dialog.model=!1}}}},mounted:function(){var t=this;this.setLoading(!0),this.init(),this.getDataset(this.url).then(function(e){t.dataset.items=e.items,t.setLoading(!1)})},watch:{"toolbar.selected":function(t){var e=this;e.$emit("item-change",t),t.url?this.getDataset(t.url).then(function(t){e.dataset.items=t.items,e.dataset.items.map(function(t){e.dataSelected.findIndex(function(e){return e.id==t.id})>-1&&(t.active=!0)})}):e.dataset.items=[]},open:function(t){this.dialog.model=this.open,console.log(this.open,this.dialog.model,t),this.$emit("open",t),this.$emit("input",!t)},"dialog.model":function(t){console.log("dm",t)}}}},function(t,e){},function(t,e){t.exports=function(t,e,i,o){var n,a=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(n=t,a=t.default);var s="function"==typeof a?a.options:a;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),i&&(s._scopeId=i),o){var r=s.computed||(s.computed={});Object.keys(o).forEach(function(t){var e=o[t];r[t]=function(){return e}})}return{esModule:n,exports:a,options:s}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{fullscreen:"",lazy:"",transition:"dialog-bottom-transition","hide-overlay":""},model:{value:t.dialog.model,callback:function(e){t.dialog.model=e},expression:"dialog.model"}},[t._t("activator"),t._v(" "),i("v-card",{staticClass:"card--mediabox grey lighten-4",attrs:{flat:"",tile:""}},[t._t("toolbar",[i("v-toolbar",{staticClass:"accent",attrs:{fixed:"",dark:""}},[t.loading.model?i("v-progress-circular",{staticClass:"primary--text",attrs:{indeterminate:""}}):t._e(),t._v(" "),i("v-menu",{attrs:{"nudge-width":100}},[i("v-btn",{attrs:{flat:""},slot:"activator"},[t.loading.model?t._e():i("v-icon",{attrs:{dark:"",left:""}},[t._v(t._s(t.toolbar.selected.icon))]),t._v(" "),i("span",[t._v(t._s(t.toolbar.selected.title))]),t._v(" "),i("v-icon",{attrs:{dark:"",right:""}},[t._v("arrow_drop_down")])],1),t._v(" "),i("v-list",t._l(t.toolbar.items,function(e){return i("v-list-tile",{key:e.code,on:{click:function(i){t.toolbar.selected=e}}},[i("v-list-tile-action",[i("v-icon",{attrs:{left:""},domProps:{innerHTML:t._s(e.icon)}})],1),t._v(" "),i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.title))])],1),t._v(" "),i("v-list-tile-action",[i("span",{staticClass:"grey--text",domProps:{innerHTML:t._s(e.count)}})])],1)}))],1),t._v(" "),i("v-spacer"),t._v(" "),t._t("selected-text",[t.dataSelected&&t.multiple?i("span",[t._v(t._s(t.dataSelected.length)+" Selected")]):t._e(),t._v(" "),i("v-spacer")]),t._v(" "),i("v-btn",{attrs:{icon:"",ripple:""}},[i("v-icon",{attrs:{dark:""}},[t._v("search")])],1),t._v(" "),i("v-btn",{class:t.toolbar.buttons.gridlist.model?"btn--active":"",attrs:{icon:""},nativeOn:{click:function(e){t.toolbar.buttons.gridlist.model=!t.toolbar.buttons.gridlist.model}}},[i("v-icon",[t._v(t._s(t.toolbar.buttons.gridlist.model?"view_module":"list"))])],1),t._v(" "),i("v-btn",{attrs:{icon:"",ripple:""},nativeOn:{click:function(e){t.dialogbox().close()}}},[i("v-icon",{attrs:{dark:""}},[t._v("close")])],1)],2)]),t._v(" "),i("v-toolbar",{attrs:{card:""}}),t._v(" "),i("v-divider"),t._v(" "),t._t("content",[i("v-container",{attrs:{fluid:"","fill-height":"","grid-list-lg":""}},[i("v-layout",{staticClass:"pt-4",attrs:{row:"",wrap:"","fill-height":""}},[t._l(t.computedDataset.items,function(e,o){return[i("v-flex",[i("v-scale-transition",[i("v-card",{staticClass:"mediabox-item",class:e.active?"mediabox-item--active elevation-10":"elevation-1",attrs:{tile:"",role:"button"},on:{click:function(i){i.stopPropagation(),t.computedDataset.select(i,e)}}},[t._t("item",[i("v-card-title",[t._v("\n                                            "+t._s(e.name)+"\n                                        ")]),t._v(" "),i("v-card-actions",{staticClass:"grey--text"},[e.active?i("v-icon",{attrs:{color:"green"}},[t._v("check")]):t._e(),t._v(" "),i("v-spacer"),t._v(" "),i("span",[t._v(t._s(e.mime))]),t._v(" "),i("span",[t._v(t._s(e.type))])],1)],{item:e})],2)],1)],1)]})],2)],1)],{dataset:t.computedDataset})],2)],2)},staticRenderFns:[]}},function(t,e,i){t.exports=i(0)}])});
//# sourceMappingURL=Mediabox.js.map